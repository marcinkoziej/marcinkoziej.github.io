# About

This project is my portfolio.
It is meant as a gimmick to show my Elixir skill, by coding portoflio using a Popcorn library, which compiles Elixir to WASM and runs on AtomVM virtual machine.
AtomVM is a stripped-down version of BEAM which works in WASM.

AtomVM website: https://atomvm.org/
Popcorn documentation: https://hexdocs.pm/popcorn/readme.html

# Commands

- `mix build` - creates WASM file in
- `mix dev` - run a hot-reloading server for develompent (at port 4000)
- `mix server` - run a simple local server (at port 4000)

# Architecture

## Windows

A window is a boxed piece of content which can be opened and closed.
It mimicks the TUI windows known from terminal emulators.

- A process (Portfolio.UI.Window run under a WindowSupervisor and managed with WindowManager)
- The content of the window is generated by Portfolio.ContentView from tamplets under lib/portfolio/templates/
- List of all windows and their matching content is specified in the toc in config/config.exs
- There is an url handler that opens a window when url has changes to `#somewindow`. This will open a window configured in the toc. As a convention, the template file will be `somewindow.html.eex` and a method will be generated in `Portfolio.ContentView` to render it.
- Each window has a header which is part of the template.

## Terminal

The `Portfolio.Terminal` runs an `ExTTY` process and passes keystrokes and shell output to frontend, where it is rendered in Xterm JS. Implementation mostly copied from one of Popcorn examples.

## Web assets

- Style provided by Terminal CSS, documentation: https://terminalcss.xyz/
- X term provided by project Xterm JS, documentation: https://xtermjs.org/

# AtomVM limitations

AtomVM does not implement timer module. This means:

1. Process.send_after does not work!
2. Process.sleep does not work!
3. Logger does not work, as the default format will prefix logs with time, and I could not find way to change it.
4. Some OTP modules will use Logger, for example DynamicSupervisor, and it cannot be used. This is why I implement Supervisor module directly in WindowSupervisor.

# Testing and debugging

Run the server using `mix dev` and use `puppeteer` mcp to browse the site (it will run at http://localhost:4000)
